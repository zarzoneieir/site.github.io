<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crush Game</title>
    <style>
        body { background: #222; color: white; text-align: center; font-family: Arial, sans-serif; }
    </style>
</head>
<body>
    <h1>Crush</h1>
    <p>Watch the rocket fly! Cash out before it crashes.</p>
    <input id="bet" type="number" placeholder="Enter your bet">
    <button onclick="startCrush()">Start Game</button>
    <p id="rocket"></p>
    <p id="crushResult"></p>
    <button id="cashOutButton" onclick="cashOut()" disabled>Cash Out</button>
    <script>
        let multiplier = 1;
        let interval;

        function startCrush() {
            multiplier = 1;
            document.getElementById('crushResult').innerText = '';
            document.getElementById('cashOutButton').disabled = false;
            const user = JSON.parse(localStorage.getItem('user'));
            const bet = parseInt(document.getElementById('bet').value);
            if (bet > user.balance) {
                document.getElementById('crushResult').innerText = "Not enough balance!";
                return;
            }
            interval = setInterval(() => {
                multiplier += 0.1;
                document.getElementById('rocket').innerText = `ðŸš€ x${multiplier.toFixed(1)}`;
                if (Math.random() < 0.01 * multiplier) {
                    clearInterval(interval);
                    document.getElementById('cashOutButton').disabled = true;
                    document.getElementById('crushResult').innerText = "You crashed! You lose.";
                    user.balance -= bet;
                    localStorage.setItem('user', JSON.stringify(user));
                }
            }, 500);
        }

        function cashOut() {
            const user = JSON.parse(localStorage.getItem('user'));
            const bet = parseInt(document.getElementById('bet').value);
            user.balance += bet * multiplier;
            document.getElementById('crushResult').innerText = `Cashed out at x${multiplier.toFixed(1)}!`;
            clearInterval(interval);
            localStorage.setItem('user', JSON.stringify(user));
            document.getElementById('cashOutButton').disabled = true;
        }
    </script>
</body>
</html>
