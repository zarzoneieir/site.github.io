<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Miner Game</title>
    <style>
        body { background: #222; color: white; text-align: center; font-family: Arial, sans-serif; }
    </style>
</head>
<body>
    <h1>Miner</h1>
    <p>Pick a square. Avoid bombs!</p>
    <input id="bet" type="number" placeholder="Enter your bet">
    <button onclick="startMiner()">Start Game</button>
    <div id="grid"></div>
    <p id="result"></p>
    <script>
        const gridSize = 5;
        let bombPosition = Math.floor(Math.random() * gridSize * gridSize);
        let pickedPositions = new Set();

        function createGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            for (let i = 0; i < gridSize * gridSize; i++) {
                const cell = document.createElement('button');
                cell.style.width = '50px';
                cell.style.height = '50px';
                cell.onclick = () => pickSquare(i);
                grid.appendChild(cell);
            }
        }

        function pickSquare(position) {
            const user = JSON.parse(localStorage.getItem('user'));
            if (pickedPositions.has(position)) return;
            pickedPositions.add(position);
            if (position === bombPosition) {
                document.getElementById('result').innerText = "You hit a bomb! You lose.";
                user.balance -= parseInt(document.getElementById('bet').value);
            } else {
                document.getElementById('result').innerText = "Safe! Continue.";
                user.balance += parseInt(document.getElementById('bet').value);
            }
            localStorage.setItem('user', JSON.stringify(user));
            updateBalance();
        }

        function updateBalance() {
            document.getElementById('result').innerHTML += `<br>Balance: $${JSON.parse(localStorage.getItem('user')).balance}`;
        }

        function startMiner() {
            bombPosition = Math.floor(Math.random() * gridSize * gridSize);
            pickedPositions.clear();
            createGrid();
            document.getElementById('result').innerText = '';
        }
    </script>
</body>
</html>
